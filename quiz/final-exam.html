<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>Final Exam</title>
	<link href="../css/bootstrap.min.css" rel="stylesheet">
	<link href="../css/quiz.css" rel="stylesheet">
	<script type="text/javascript" src="../js/external/mootools-core-1.4.5-minified.js"></script>
	<script type="text/javascript" src="../js/dg-quiz-maker.js"></script>
	<meta charset="UTF-8">
</head>

<body>

<div id="quiz-header"> 
	<h2>Final Exam</h2>
	<ul>
	<li/>Congratulations on reaching the end of the course. This is your final requirement.
	<li/>You can also take this as many times as you want.
	<li/>The passing score is 80%.
	</ul>
	<p> Good luck! :) </p>
	<hr>
</div>
<div id="questions"></div>
<div id="error"></div>
<div id="result"></div>

<script type="text/javascript">

function showWrongAnswer(){
    document.id('error').set('html', 'Wrong answer, Please try again');
}

function showScore() {
	var score = quizMaker.getScore();

	var el = new Element('h3');
	el.set('html', 'Thank you!');
    document.id('result').adopt(el);

	el = new Element('h4');
	el.set('html', 'Score: ' + score.numCorrectAnswers + ' of ' + score.numQuestions + ' = ' + (score.numCorrectAnswers/score.numQuestions*100) + '%');
    document.id('result').adopt(el);

    //Do not show incorrect answers
    
	if(score.incorrectAnswers.length > 0) {
		el = new Element('h4');
		el.set('html', 'Incorrect answers:');
        document.id('result').adopt(el);

		for(var i=0;i<score.incorrectAnswers.length;i++) {
			var incorrectAnswer = score.incorrectAnswers[i];
			el = new Element('div');
			el.set('html', '<b>' +  incorrectAnswer.questionNumber + ': ' + incorrectAnswer.label + '</b>');
			document.id('result').adopt(el);

			el = new Element('div');
			el.set('html', 'Correct answer : ' + incorrectAnswer.correctAnswer);
            document.id('result').adopt(el);
			el = new Element('div');
			el.set('html', 'Your answer : ' + incorrectAnswer.userAnswer);
            document.id('result').adopt(el);

		}
	}
	
}

var questions = [
{
	label : 'ACID stands for Atomicity Consistency Isolation Durability.',
	options : ['True', 'False'],
	answer : ['True']
},
{
	label : 'Storing your data in plains files (e.g. txt or csv) is a good alternative to using a DBMS.',
	options : ['True', 'False'],
	answer : ['False']
},
{
	label : 'Which of these problems does a DBMS help solve?',
	options : ['Data duplications', 'Need for ad-hoc system to use the data', 'Human error', 'All of the above'],
	answer : ['All of the above']
},
{
	label : 'Which of the following is not a DBMS?',
	options : ['MongoDB', 'MySQL', 'Microsoft Excel', 'Redis'],
	answer : ['Microsoft Excel']
},
{
	label : 'Any collection of data is a database.',
	options : ['True', 'False'],
	answer : ['False']
},
{
	label : 'The concept of degree is different for  relationships and relations.',
	options : ['True', 'False'],
	answer : ['True']
},
{
	label : 'Which of the following is a property of a primary key?',
	options : ['Has a unique value for each tuple', 'References another relation', 'Changes value over time', 'None of the above'],
	answer : ['Has a unique value for each tuple']
},
{
	label : 'The surname attribute is a good choice for a primary key in a Person entity or relation.',
	options : ['True', 'False'],
	answer : ['False']
},
{
	label : 'Which of the following are FALSE about normal forms?',
	options : ['Normal forms make the DB easier to use.', 'Normal forms are not always respected in the industry.', 'None of these', 'Normal forms are a set of rules about functional dependencies.'],
	answer : ['None of these']
},
{
	label : 'A university stores information about its professors and classes in its database. The relation Prof_Class stores information indicating what professor teaches which class, and for how many hours. Different teachers can teach the same class for a different number of hours. Which of the following functional dependencies exist in the following schema: \n\nProf_Class(Prof_id, Class_id, Hours, Prof_name, Class_name, Classroom)',
	options : ['{Prof_id, Class_id} -> {Hours}', '{Prof_id} -> {Prof_name}', 'All of the above', 'None of the above'],
	answer : ['All of the above']
},
{
	label : 'Let the following relation: R(a1, a2, a3, a4, a5, a6) (primary key is the only candidate key)\nwith the following functional dependencies:\n{a1, a2, a3} -> {a1, a2, a3, a4, a5, a6}; {a1, a2} -> {a4}; {a1, a2, a3} -> {a4}; {a1, a2, a3} -> {a5, a6}; {a6} -> {a4}; {a1, a2, a3} -> {a5}; {a1, a2, a3} -> {a4, a6}; {a1, a2, a3} -> {a6}; Which among the following normal forms apply to this relational schema?',
	options : ['1 NF', '2 NF', '3 NF', 'BCNF'],
	answer : ['1 NF']
},
{
	label : 'A university stores information about its professors and classes in its database. The relation Prof_Class stores information indicating what professor teaches which class, and for how many hours. Different teachers can teach the same class for a different number of hours but a class is always given in the same room. Which functional dependecy exist in the following schema: Prof_Class(Prof_id, Class_id, Hours, Prof_name, Class_name, Classroom)',
	options : ['{Prof_id, Class_id} -> {Hours}', '{Prof_id} -> {Prof_name}', '{Class_id} -> {Classroom}', 'All of the above'],
	answer : ['All of the above']
},
{
	label : 'The following decomposition is done without losing any information R(Name, Address, Job, Age) --> R1(Name, Address, Job); R2(Name, Age) Name -> R1',
	options : ['True', 'False'],
	answer : ['True']
},
{
	label : 'Let be R a relation containing n tuples, and S be a relation containing m tuples. How many tuples will the cross product of R and S (RxS) contain?',
	options : ['n+m', 'n^m', 'm^n', 'm-n', 'n*m'],
	answer : ['n*m']
},
{
	label : 'The relational algebra is the same as the SQL query language',
	options : ['True', 'False'],
	answer : ['False']
},
{
	label : 'To be union compatible, two relations must:',
	options : ['Have the same number of attributes', 'Have the same domains for their attributes', 'All of the above', 'None of the above'],
	answer : ['All of the above']
},
{
	label : 'An inner join is equivalent to a cross product and a select.',
	options : ['True', 'False'],
	answer : ['True']
},
{
	label : 'The result of an SQL query is a table and can be used as part of another query.',
	options : ['True', 'False'],
	answer : ['True']
},
{
	label : 'The relational algebra is the same as the SQL query language.',
	options : ['True', 'False'],
	answer : ['False']
},
{
	label : 'The Division relational operation is not implemented in the SQL language.',
	options : ['True', 'False'],
	answer : ['True']
},
{
	label : 'INSERT and UPDATE are operations for which a trigger can use the NEW variable to access data.',
	options : ['True', 'False'],
	answer : ['True']
},
{
	label : 'Functions and procedures are the same thing in PostgreSQL.',
	options : ['True', 'False'],
	answer : ['False']
},
{
	label : 'DELETE and UPDATE are operations for which a trigger can use the OLD variable to access data.',
	options : ['True', 'False'],
	answer : ['True']
},
{
	label : 'When writing queries in SQL we do not need to worry about performance as the DBMS will optimise our query for us.',
	options : ['True', 'False'],
	answer : ['False']
},
{
	label : 'What data does the RDBMS use to approximate the cost of a plan?',
	options : ['The table contents', 'The horoscope', 'The catalog', 'Random numbers'],
	answer : ['The catalog']
},
{
	label : 'According to the principles given in the lectures, which query should be more efficient?',
	options : ['SELECT * FROM Customer, Order WHERE Customer.customer_id = Order.customer_id', 'SELECT CustomerId, FirstName, LastName FROM Customer NATURAL JOIN Order', 'SELECT * FROM Customer, Order FROM Customer NATURAL JOIN Order'],
	answer : ['SELECT CustomerId, FirstName, LastName FROM Customer NATURAL JOIN Order']
},
{
	label : 'If a column is often used to select records we should build an index.',
	options : ['True', 'False'],
	answer : ['True']
},
{
	label : 'We should always build all possible indexes.',
	options : ['True', 'False'],
	answer : ['False']
},
{
	label : 'Which of the following is not a database index type?',
	options : ['Multi-level index', 'Secondary index', 'B+ tree index', 'Primary index', 'UV index'],
	answer : ['UV index']
},
{
	label : 'Recovery is how the DBMS copes when a failure happens. It is strongly tied with the ACID properties of DBMS.',
	options : ['True', 'False'],
	answer : ['True']
},
{
	label : 'Which ACID property is described in the following: Once a transaction is committed, it should stay committed even though the database crashes.',
	options : ['Atomicity', 'Consistency', 'Isolation', 'Durability'],
	answer : ['Durability']
},
{
	label : 'Backups are a snapshot of the database (or of a system in general) in a consistent state at a past point in time.',
	options : ['True', 'False'],
	answer : ['True']
},
{
	label : 'RDB systems can not scale horizontally.',
	options : ['True', 'False'],
	answer : ['True']
},
{
	label : 'It is impossible for NoSQL systems to impose full ACID guarantees.',
	options : ['True', 'False'],
	answer : ['False']
},
{
	label : 'Relational (SQL) databases will soon be completely replaced by NoSQL databases.',
	options : ['True', 'False'],
	answer : ['False']
}
]

function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

function showAnswerAlert() {
	document.id('error').set('html', 'You have to answer before you continue to the next question');
}
function clearErrorBox() {
    document.id('error').set('html','');
}

ITEM_COUNT = 25
random_questions = shuffle(questions).slice(0,ITEM_COUNT)

var quizMaker = new DG.QuizMaker({
	questions : shuffle(random_questions),
	el : 'questions',
    forceCorrectAnswer:false,
	listeners : {
		'finish' : showScore,
		'missinganswer' : showAnswerAlert,
		'sendanswer' : clearErrorBox,
        'wrongAnswer' : showWrongAnswer
	}
});



quizMaker.start();


</script>

</body>
</html>