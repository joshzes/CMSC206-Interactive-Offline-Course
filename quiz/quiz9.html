<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>Topic 9 Quiz</title>
	<link href="../css/bootstrap.min.css" rel="stylesheet">
	<link href="../css/quiz.css" rel="stylesheet">
	<script type="text/javascript" src="../js/external/mootools-core-1.4.5-minified.js"></script>
	<script type="text/javascript" src="../js/dg-quiz-maker.js"></script>
	<meta charset="UTF-8">
</head>

<body>

<div id="quiz-header"> 
	<h2>Topic 9 Quiz</h2>
	<ul>
	<li/>Note that you need to get a perfect score in all the quizzes to be able to take the final exam. 
	<li/>Nevertheless, you can take the quizzes as many times as you want.
	</ul>
	<p> Good luck! :) </p>
	<hr>
</div>
<div id="questions"></div>
<div id="error"></div>
<div id="result"></div>

<script type="text/javascript">

function showWrongAnswer(){
    document.id('error').set('html', 'Wrong answer, Please try again');
}

function showScore() {
	var score = quizMaker.getScore();

	var el = new Element('h3');
	el.set('html', 'Thank you!');
    document.id('result').adopt(el);

	el = new Element('h4');
	el.set('html', 'Score: ' + score.numCorrectAnswers + ' of ' + score.numQuestions + ' = ' + (score.numCorrectAnswers/score.numQuestions*100) + '%');
    document.id('result').adopt(el);

    //Do not show incorrect answers
    
	if(score.incorrectAnswers.length > 0) {
		el = new Element('h4');
		el.set('html', 'Incorrect answers:');
        document.id('result').adopt(el);

		for(var i=0;i<score.incorrectAnswers.length;i++) {
			var incorrectAnswer = score.incorrectAnswers[i];
			el = new Element('div');
			el.set('html', '<b>' +  incorrectAnswer.questionNumber + ': ' + incorrectAnswer.label + '</b>');
			document.id('result').adopt(el);

			el = new Element('div');
			el.set('html', 'Correct answer : ' + incorrectAnswer.correctAnswer);
            document.id('result').adopt(el);
			el = new Element('div');
			el.set('html', 'Your answer : ' + incorrectAnswer.userAnswer);
            document.id('result').adopt(el);

		}
	}
	
}

var _0x56b242=_0x7d1c;(function(_0x50d453,_0xa6230){var _0x54f971=_0x7d1c,_0xab3264=_0x50d453();while(!![]){try{var _0x2b8360=parseInt(_0x54f971(0xd9))/0x1*(parseInt(_0x54f971(0xcd))/0x2)+-parseInt(_0x54f971(0xd2))/0x3+parseInt(_0x54f971(0xd4))/0x4+parseInt(_0x54f971(0xd7))/0x5*(parseInt(_0x54f971(0xd6))/0x6)+-parseInt(_0x54f971(0xd5))/0x7*(parseInt(_0x54f971(0xce))/0x8)+parseInt(_0x54f971(0xca))/0x9+-parseInt(_0x54f971(0xd8))/0xa*(parseInt(_0x54f971(0xc9))/0xb);if(_0x2b8360===_0xa6230)break;else _0xab3264['push'](_0xab3264['shift']());}catch(_0x107481){_0xab3264['push'](_0xab3264['shift']());}}}(_0x1bb6,0x97c33));function _0x7d1c(_0x2da00c,_0x3b53b5){var _0x1bb662=_0x1bb6();return _0x7d1c=function(_0x7d1c65,_0x105386){_0x7d1c65=_0x7d1c65-0xc9;var _0x43f2a2=_0x1bb662[_0x7d1c65];return _0x43f2a2;},_0x7d1c(_0x2da00c,_0x3b53b5);}var questions=[{'label':_0x56b242(0xd1),'options':[_0x56b242(0xd3),'False'],'answer':['True']},{'label':_0x56b242(0xcc),'options':[_0x56b242(0xd0),'Consistency',_0x56b242(0xcb),_0x56b242(0xda)],'answer':['Durability']},{'label':'Backups\x20are\x20a\x20snapshot\x20of\x20the\x20database\x20(or\x20of\x20a\x20system\x20in\x20general)\x20in\x20a\x20consistent\x20state\x20at\x20a\x20past\x20point\x20in\x20time.','options':[_0x56b242(0xd3),_0x56b242(0xcf)],'answer':[_0x56b242(0xd3)]}];function _0x1bb6(){var _0x24f0d5=['1069725vrkFxV','True','2381576NIgxbX','5156697VNKtyn','384TzQcQx','41020bJkBaS','10AyBAZd','291326oifRqk','Durability','847462tOeOnb','3421179IRlIrr','Isolation','Which\x20ACID\x20property\x20is\x20described\x20in\x20the\x20following:\x20Once\x20a\x20transaction\x20is\x20committed,\x20it\x20should\x20stay\x20committed\x20even\x20though\x20the\x20database\x20crashes.','2iqVoKC','8wJwyJS','False','Atomicity','Recovery\x20is\x20how\x20the\x20DBMS\x20copes\x20when\x20a\x20failure\x20happens.\x20It\x20is\x20strongly\x20tied\x20with\x20the\x20ACID\x20properties\x20of\x20DBMS.'];_0x1bb6=function(){return _0x24f0d5;};return _0x1bb6();}


function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

function showAnswerAlert() {
	document.id('error').set('html', 'You have to answer before you continue to the next question');
}
function clearErrorBox() {
    document.id('error').set('html','');
}

ITEM_COUNT = 10
random_questions = shuffle(questions).slice(0,ITEM_COUNT)

var quizMaker = new DG.QuizMaker({
	questions : shuffle(random_questions),
	el : 'questions',
    forceCorrectAnswer:false,
	listeners : {
		'finish' : showScore,
		'missinganswer' : showAnswerAlert,
		'sendanswer' : clearErrorBox,
        'wrongAnswer' : showWrongAnswer
	}
});



quizMaker.start();


</script>

</body>
</html>