<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>Topic 7 Quiz</title>
	<link href="../css/bootstrap.min.css" rel="stylesheet">
	<link href="../css/quiz.css" rel="stylesheet">
	<script type="text/javascript" src="../js/external/mootools-core-1.4.5-minified.js"></script>
	<script type="text/javascript" src="../js/dg-quiz-maker.js"></script>
	<meta charset="UTF-8">
</head>

<body>

<div id="quiz-header"> 
	<h2>Topic 7 Quiz</h2>
	<ul>
	<li/>Note that you need to get a perfect score in all the quizzes to be able to take the final exam. 
	<li/>Nevertheless, you can take the quizzes as many times as you want.
	</ul>
	<p> Good luck! :) </p>
	<hr>
</div>
<div id="questions"></div>
<div id="error"></div>
<div id="result"></div>

<script type="text/javascript">

function showWrongAnswer(){
    document.id('error').set('html', 'Wrong answer, Please try again');
}

function showScore() {
	var score = quizMaker.getScore();

	var el = new Element('h3');
	el.set('html', 'Thank you!');
    document.id('result').adopt(el);

	el = new Element('h4');
	el.set('html', 'Score: ' + score.numCorrectAnswers + ' of ' + score.numQuestions + ' = ' + (score.numCorrectAnswers/score.numQuestions*100) + '%');
    document.id('result').adopt(el);

    //Do not show incorrect answers
    
	if(score.incorrectAnswers.length > 0) {
		el = new Element('h4');
		el.set('html', 'Incorrect answers:');
        document.id('result').adopt(el);

		for(var i=0;i<score.incorrectAnswers.length;i++) {
			var incorrectAnswer = score.incorrectAnswers[i];
			el = new Element('div');
			el.set('html', '<b>' +  incorrectAnswer.questionNumber + ': ' + incorrectAnswer.label + '</b>');
			document.id('result').adopt(el);

			el = new Element('div');
			el.set('html', 'Correct answer : ' + incorrectAnswer.correctAnswer);
            document.id('result').adopt(el);
			el = new Element('div');
			el.set('html', 'Your answer : ' + incorrectAnswer.userAnswer);
            document.id('result').adopt(el);

		}
	}
	
}

function _0x4f55(_0x2cd897,_0x1624e1){var _0x402d7c=_0x402d();return _0x4f55=function(_0x4f5562,_0x213eb5){_0x4f5562=_0x4f5562-0x18d;var _0xfb4c28=_0x402d7c[_0x4f5562];return _0xfb4c28;},_0x4f55(_0x2cd897,_0x1624e1);}var _0x165ce3=_0x4f55;function _0x402d(){var _0x5b2320=['Random\x20numbers','16CZYEPO','305397bJYeVf','543627EjYzgm','False','153665XmpVvl','517363qcFVKg','4wwBEll','What\x20data\x20does\x20the\x20RDBMS\x20use\x20to\x20approximate\x20the\x20cost\x20of\x20a\x20plan?','614965sxcTUP','The\x20table\x20contents','185700lwuoMN','When\x20writing\x20queries\x20in\x20SQL\x20we\x20do\x20not\x20need\x20to\x20worry\x20about\x20performance\x20as\x20the\x20DBMS\x20will\x20optimise\x20our\x20query\x20for\x20us.','SELECT\x20CustomerId,\x20FirstName,\x20LastName\x20FROM\x20Customer\x20NATURAL\x20JOIN\x20Order','The\x20horoscope','The\x20catalog','40rzeyiT','56529nKPlJP','According\x20to\x20the\x20principles\x20given\x20in\x20the\x20lectures,\x20which\x20query\x20should\x20be\x20more\x20efficient?','True','3540lUAHSR','SELECT\x20*\x20FROM\x20Customer,\x20Order\x20WHERE\x20Customer.customer_id\x20=\x20Order.customer_id'];_0x402d=function(){return _0x5b2320;};return _0x402d();}(function(_0x1134dd,_0x3ea749){var _0x48859f=_0x4f55,_0x1a9272=_0x1134dd();while(!![]){try{var _0x3ec29a=-parseInt(_0x48859f(0x19a))/0x1+parseInt(_0x48859f(0x19c))/0x2*(-parseInt(_0x48859f(0x197))/0x3)+parseInt(_0x48859f(0x196))/0x4*(-parseInt(_0x48859f(0x19e))/0x5)+-parseInt(_0x48859f(0x1a0))/0x6+-parseInt(_0x48859f(0x19b))/0x7+parseInt(_0x48859f(0x18f))/0x8*(-parseInt(_0x48859f(0x198))/0x9)+-parseInt(_0x48859f(0x193))/0xa*(-parseInt(_0x48859f(0x190))/0xb);if(_0x3ec29a===_0x3ea749)break;else _0x1a9272['push'](_0x1a9272['shift']());}catch(_0x18b0b6){_0x1a9272['push'](_0x1a9272['shift']());}}}(_0x402d,0x89799));var questions=[{'label':_0x165ce3(0x1a1),'options':[_0x165ce3(0x192),_0x165ce3(0x199)],'answer':[_0x165ce3(0x199)]},{'label':_0x165ce3(0x19d),'options':[_0x165ce3(0x19f),_0x165ce3(0x18d),_0x165ce3(0x18e),_0x165ce3(0x195)],'answer':[_0x165ce3(0x18e)]},{'label':_0x165ce3(0x191),'options':[_0x165ce3(0x194),_0x165ce3(0x1a2),'SELECT\x20*\x20FROM\x20Customer,\x20Order\x20FROM\x20Customer\x20NATURAL\x20JOIN\x20Order'],'answer':[_0x165ce3(0x1a2)]}];

function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

function showAnswerAlert() {
	document.id('error').set('html', 'You have to answer before you continue to the next question');
}
function clearErrorBox() {
    document.id('error').set('html','');
}

ITEM_COUNT = 4
random_questions = shuffle(questions).slice(0,ITEM_COUNT)

var quizMaker = new DG.QuizMaker({
	questions : shuffle(random_questions),
	el : 'questions',
    forceCorrectAnswer:false,
	listeners : {
		'finish' : showScore,
		'missinganswer' : showAnswerAlert,
		'sendanswer' : clearErrorBox,
        'wrongAnswer' : showWrongAnswer
	}
});



quizMaker.start();


</script>

</body>
</html>